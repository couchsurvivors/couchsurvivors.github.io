import{_ as Re}from"./CwEg6_B1.js";import{u as Pe,g as Ue}from"./BDMqj2N9.js";import{a6 as Te,a7 as Ne,aa as Ee,ab as Be,az as Ze,r as x,T as $,ac as de,c as w,b0 as Oe,b1 as $e,b2 as Ke,X as Z,b3 as K,b4 as ze,af as je,A as a,K as ee,b5 as We,aj as B,I as qe,L as ve,b6 as Ge,M as ie,b7 as Xe,b8 as Je,C as _,b9 as Qe,ba as Ye,bb as el,Z as me,aP as ll,d as al,a1 as tl,bc as nl,al as ul,P as ol,o as il,v as fe,F as Ve,B as v,R as m,a0 as sl,a3 as ge,a4 as rl,bd as cl,be as Ce,y as be,S as z,H as dl,G as vl,a5 as ml,bf as fl,q as pe}from"./Crjt-6gT.js";import{m as Vl,V as j}from"./B8uue2m5.js";import{V as Ae}from"./DdCecYVG.js";import{V as gl}from"./Dwoyr9Wm.js";import{V as Y,a as U}from"./h2dV1LPr.js";import{m as Cl,b as bl,u as pl,c as Al,d as hl,a as yl}from"./CJZq-sGN.js";import{V as Hl}from"./DlGMm1Om.js";import{V as wl}from"./BPhhcbvp.js";import{V as xl}from"./BLyfWBah.js";function kl(e,H,F){if(H==null)return e;if(Array.isArray(H))throw new Error("Multiple matches is not implemented");return typeof H=="number"&&~H?a(ee,null,[a("span",{class:"v-combobox__unmask"},[e.substr(0,H)]),a("span",{class:"v-combobox__mask"},[e.substr(H,F)]),a("span",{class:"v-combobox__unmask"},[e.substr(H+F)])]):e}const Ml=Te({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Cl({filterKeys:["title"]}),...bl({hideNoData:!0,returnObject:!0}),...Ne(Vl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ee({transition:!1})},"VCombobox"),Il=Be()({name:"VCombobox",props:Ml(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,H){var se;let{emit:F,slots:r}=H;const{t:O}=Ze(),p=x(),b=$(!1),k=$(!0),o=$(!1),S=x(),T=x(),N=de(e,"menu"),V=w({get:()=>N.value,set:l=>{var u;N.value&&!l&&((u=S.value)!=null&&u.Î¨openChildren)||(N.value=l)}}),c=$(-1);let D=!1;const le=w(()=>{var l;return(l=p.value)==null?void 0:l.color}),E=w(()=>V.value?e.closeText:e.openText),{items:W,transformIn:q,transformOut:ae}=Oe(e),{textColorClasses:te,textColorStyles:ne}=$e(le),i=de(e,"modelValue",[],l=>q(ll(l)),l=>{const u=ae(l);return e.multiple?u:u[0]??null}),g=Ke(),n=w(()=>!!(e.chips||r.chip)),A=w(()=>n.value||!!r.selection),s=$(!e.multiple&&!A.value?((se=i.value[0])==null?void 0:se.title)??"":""),C=w({get:()=>s.value,set:l=>{var u;if(s.value=l??"",!e.multiple&&!A.value&&(i.value=[K(e,l)]),l&&e.multiple&&((u=e.delimiters)!=null&&u.length)){const f=l.split(new RegExp(`(?:${e.delimiters.join("|")})+`));f.length>1&&(f.forEach(t=>{t=t.trim(),t&&M(K(e,t))}),s.value="")}l||(c.value=-1),k.value=!l}}),he=w(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?i.value.length:C.value.length);Z(s,l=>{D?me(()=>D=!1):b.value&&!V.value&&(V.value=!0),F("update:search",l)}),Z(i,l=>{var u;!e.multiple&&!A.value&&(s.value=((u=l[0])==null?void 0:u.title)??"")});const{filteredItems:G,getMatches:ye}=pl(e,W,()=>k.value?"":C.value),L=w(()=>e.hideSelected?G.value.filter(l=>!i.value.some(u=>u.value===l.value)):G.value),He=w(()=>i.value.map(l=>l.value)),X=w(()=>{var u;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&C.value===((u=L.value[0])==null?void 0:u.title))&&L.value.length>0&&!k.value&&!o.value}),ue=w(()=>e.hideNoData&&!L.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),oe=x(),{onListScroll:we,onListKeydown:xe}=Al(oe,p);function ke(l){D=!0,e.openOnClear&&(V.value=!0)}function Me(){ue.value||(V.value=!0)}function Ie(l){ue.value||(b.value&&(l.preventDefault(),l.stopPropagation()),V.value=!V.value)}function Le(l){var t;if(el(l)||e.readonly||g!=null&&g.isReadonly.value)return;const u=p.value.selectionStart,f=i.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(V.value=!0),["Escape"].includes(l.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(X.value&&["Enter","Tab"].includes(l.key)&&M(G.value[0]),k.value=!0),l.key==="ArrowDown"&&X.value&&((t=oe.value)==null||t.focus("next")),l.key==="Enter"&&C.value&&(M(K(e,C.value)),A.value&&(s.value="")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&A.value&&i.value.length>0&&!C.value)return M(i.value[0],!1);if(~c.value){const d=c.value;M(i.value[c.value],!1),c.value=d>=f-1?f-2:d}else l.key==="Backspace"&&!C.value&&(c.value=f-1)}if(e.multiple){if(l.key==="ArrowLeft"){if(c.value<0&&u>0)return;const d=c.value>-1?c.value-1:f-1;i.value[d]?c.value=d:(c.value=-1,p.value.setSelectionRange(C.value.length,C.value.length))}if(l.key==="ArrowRight"){if(c.value<0)return;const d=c.value+1;i.value[d]?c.value=d:(c.value=-1,p.value.setSelectionRange(0,0))}}}function Se(){var l;b.value&&(k.value=!0,(l=p.value)==null||l.focus())}function M(l){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const f=i.value.findIndex(d=>e.valueComparator(d.value,l.value)),t=u??!~f;if(~f){const d=t?[...i.value,l]:[...i.value];d.splice(f,1),i.value=d}else t&&(i.value=[...i.value,l]);e.clearOnSelect&&(C.value="")}else{const f=u!==!1;i.value=f?[l]:[],s.value=f&&!A.value?l.title:"",me(()=>{V.value=!1,k.value=!0})}}function _e(l){b.value=!0,setTimeout(()=>{o.value=!0})}function Fe(l){o.value=!1}function De(l){(l==null||l===""&&!e.multiple&&!A.value)&&(i.value=[])}return Z(b,(l,u)=>{if(!(l||l===u)){if(c.value=-1,V.value=!1,X.value&&!o.value&&!i.value.some(f=>{let{value:t}=f;return t===L.value[0].value})){M(L.value[0]);return}if(C.value){if(e.multiple){M(K(e,C.value));return}if(!A.value)return;i.value.some(f=>{let{title:t}=f;return t===C.value})?s.value="":M(K(e,C.value))}}}),Z(V,()=>{if(!e.hideSelected&&V.value&&i.value.length){const l=L.value.findIndex(u=>i.value.some(f=>e.valueComparator(f.value,u.value)));ze&&window.requestAnimationFrame(()=>{var u;l>=0&&((u=T.value)==null||u.scrollToIndex(l))})}}),Z(()=>e.items,(l,u)=>{V.value||b.value&&!u.length&&l.length&&(V.value=!0)}),je(()=>{const l=!!(!e.hideNoData||L.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),u=i.value.length>0,f=j.filterProps(e);return a(j,B({ref:p},f,{modelValue:C.value,"onUpdate:modelValue":[t=>C.value=t,De],focused:b.value,"onUpdate:focused":t=>b.value=t,validationValue:i.externalValue,counterValue:he.value,dirty:u,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!A.value,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:u?void 0:e.placeholder,"onClick:clear":ke,"onMousedown:control":Me,onKeydown:Le}),{...r,default:()=>a(ee,null,[a(We,B({ref:S,modelValue:V.value,"onUpdate:modelValue":t=>V.value=t,activator:"parent",contentClass:"v-combobox__content",disabled:ue.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Se},e.menuProps),{default:()=>[l&&a(qe,B({ref:oe,selected:He.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:t=>t.preventDefault(),onKeydown:xe,onFocusin:_e,onFocusout:Fe,onScrollPassive:we,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var t,d,I;return[(t=r["prepend-item"])==null?void 0:t.call(r),!L.value.length&&!e.hideNoData&&(((d=r["no-data"])==null?void 0:d.call(r))??a(ve,{title:O(e.noDataText)},null)),a(hl,{ref:T,renderless:!0,items:L.value},{default:R=>{var ce;let{item:h,index:P,itemRef:y}=R;const re=B(h.props,{ref:y,key:P,active:X.value&&P===0?!0:void 0,onClick:()=>M(h,null)});return((ce=r.item)==null?void 0:ce.call(r,{item:h,index:P,props:re}))??a(ve,B(re,{role:"option"}),{prepend:J=>{let{isSelected:Q}=J;return a(ee,null,[e.multiple&&!e.hideSelected?a(yl,{key:h.value,modelValue:Q,ripple:!1,tabindex:"-1"},null):void 0,h.props.prependAvatar&&a(Ge,{image:h.props.prependAvatar},null),h.props.prependIcon&&a(ie,{icon:h.props.prependIcon},null)])},title:()=>{var J,Q;return k.value?h.title:kl(h.title,(J=ye(h))==null?void 0:J.title,((Q=C.value)==null?void 0:Q.length)??0)}})}}),(I=r["append-item"])==null?void 0:I.call(r)]}})]}),i.value.map((t,d)=>{function I(y){y.stopPropagation(),y.preventDefault(),M(t,!1)}const R={"onClick:close":I,onKeydown(y){y.key!=="Enter"&&y.key!==" "||(y.preventDefault(),y.stopPropagation(),I(y))},onMousedown(y){y.preventDefault(),y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},h=n.value?!!r.chip:!!r.selection,P=h?Xe(n.value?r.chip({item:t,index:d,props:R}):r.selection({item:t,index:d})):void 0;if(!(h&&!P))return a("div",{key:t.value,class:["v-combobox__selection",d===c.value&&["v-combobox__selection--selected",te.value]],style:d===c.value?ne.value:{}},[n.value?r.chip?a(Je,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[P]}):a(Hl,B({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},R),null):P??a("span",{class:"v-combobox__selection-text"},[t.title,e.multiple&&d<i.value.length-1&&a("span",{class:"v-combobox__selection-comma"},[_(",")])])])})]),"append-inner":function(){var R;for(var t=arguments.length,d=new Array(t),I=0;I<t;I++)d[I]=arguments[I];return a(ee,null,[(R=r["append-inner"])==null?void 0:R.call(r,...d),(!e.hideNoData||e.items.length)&&e.menuIcon?a(ie,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:Ie,onClick:Qe,"aria-label":O(E.value),title:O(E.value)},null):void 0])}})}),Ye({isFocused:b,isPristine:k,menu:V,search:C,selectionIndex:c,filteredItems:G,select:M},p)}}),Bl=al({__name:"form",props:{item:{type:Object,default:()=>({name:"",weight:1,amount:1,image:null})}},emits:["close-dialog"],async setup(e){let H,F;const r=x(null),O=x(""),p=x(!1),b=x(null),k=e,o=x({...k.item}),S=x(null),T=tl(),N=nl(),V=ul(N,"entities");[H,F]=ol(()=>N.fetch()),await H,F();const c=x("M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z"),D=x(1),le=w(()=>o.value.weight>=1e3?(o.value.weight/1e3).toFixed(2):o.value.weight.toFixed(2)),E=g=>{switch(c.value=g>=1e3?"M12,3A4,4 0 0,1 16,7C16,7.73 15.81,8.41 15.46,9H18C18.95,9 19.75,9.67 19.95,10.56C21.96,18.57 22,18.78 22,19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19C2,18.78 2.04,18.57 4.05,10.56C4.25,9.67 5.05,9 6,9H8.54C8.19,8.41 8,7.73 8,7A4,4 0 0,1 12,3M12,5A2,2 0 0,0 10,7A2,2 0 0,0 12,9A2,2 0 0,0 14,7A2,2 0 0,0 12,5M6,11V19H8V16.5L9,17.5V19H11V17L9,15L11,13V11H9V12.5L8,13.5V11H6M15,11C13.89,11 13,11.89 13,13V17C13,18.11 13.89,19 15,19H18V14H16V17H15V13H18V11H15Z":"M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z",c.value){case"M12,3A4,4 0 0,1 16,7C16,7.73 15.81,8.41 15.46,9H18C18.95,9 19.75,9.67 19.95,10.56C21.96,18.57 22,18.78 22,19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19C2,18.78 2.04,18.57 4.05,10.56C4.25,9.67 5.05,9 6,9H8.54C8.19,8.41 8,7.73 8,7A4,4 0 0,1 12,3M12,5A2,2 0 0,0 10,7A2,2 0 0,0 12,9A2,2 0 0,0 14,7A2,2 0 0,0 12,5M6,11V19H8V16.5L9,17.5V19H11V17L9,15L11,13V11H9V12.5L8,13.5V11H6M15,11C13.89,11 13,11.89 13,13V17C13,18.11 13.89,19 15,19H18V14H16V17H15V13H18V11H15Z":D.value=.1;break;case"M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z":D.value=1;break}},W=()=>{r.value.click()},q=g=>{const n=g.target.files[0];if(n){const A=new FileReader;A.onload=s=>{b.value=s.target.result},A.readAsDataURL(n)}else b.value=null},ae=async()=>{try{if(o.value.category=o.value.category.id,S.value){const g=await Pe("images",fl(),S.value);o.value.image=g.path}if(o.value.id)await T.update(o.value);else{const g={...o.value};await T.create(g)}pe("/items")}catch(g){console.error("An error occurred while saving the item:",g)}};async function te(){p.value=!0}async function ne(){await T.delete(o.value.id),pe("/items")}async function i(){O.value=await Ue("images",o.value.image)}return Z(()=>o.value.weight,E),il(()=>{k.item.image&&i(),E(o.value.weight)}),(g,n)=>{const A=Re;return fe(),Ve(xl,null,{default:v(()=>[a(j,{modelValue:m(o).name,"onUpdate:modelValue":n[0]||(n[0]=s=>m(o).name=s),label:"Name"},null,8,["modelValue"]),a(Ae,{class:sl(m(o).image?"d-none":""),modelValue:m(o).image,"onUpdate:modelValue":n[1]||(n[1]=s=>m(o).image=s),label:"New Image",accept:"image/*","show-size":"","prepend-icon":"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",clearable:"",onChange:q},null,8,["class","modelValue"]),a(Ae,{class:"d-none",ref_key:"fileInput",ref:r,modelValue:m(S),"onUpdate:modelValue":n[2]||(n[2]=s=>ge(S)?S.value=s:null),label:"Change Image",accept:"image/*","show-size":"","prepend-icon":"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",clearable:"",onChange:q},null,8,["modelValue"]),a(gl,null,{default:v(()=>[m(b)?rl("",!0):(fe(),Ve(A,{key:0,onClick:W,"image-path":m(o).image},null,8,["image-path"])),a(cl,{"v-if":m(b),src:m(b),onClick:W},null,8,["v-if","src"])]),_:1}),a(Y,null,{default:v(()=>[a(Il,{modelValue:m(o).category,"onUpdate:modelValue":n[3]||(n[3]=s=>m(o).category=s),items:m(V),label:"Category","item-title":"name","item-value":"id"},{"prepend-inner":v(()=>[a(ie,null,{default:v(()=>[_("M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z")]),_:1})]),_:1},8,["modelValue","items"])]),_:1}),a(Y,null,{default:v(()=>[a(U,{cols:"10"},{default:v(()=>[a(Ce,{modelValue:m(o).weight,"onUpdate:modelValue":n[4]||(n[4]=s=>m(o).weight=s),label:"Weight",min:1,max:1e4,step:m(D),onChange:E},null,8,["modelValue","step"])]),_:1}),a(U,{cols:"2"},{default:v(()=>[be("span",null,[a(j,{value:m(le),"append-inner-icon":m(c),readonly:""},null,8,["value","append-inner-icon"])])]),_:1})]),_:1}),a(Y,null,{default:v(()=>[a(U,{cols:"10"},{default:v(()=>[a(Ce,{modelValue:m(o).amount,"onUpdate:modelValue":n[5]||(n[5]=s=>m(o).amount=s),label:"Amount",min:"1",max:"50",step:"1"},null,8,["modelValue"])]),_:1}),a(U,{cols:"2"},{default:v(()=>[be("span",null,[a(j,{modelValue:m(o).amount,"onUpdate:modelValue":n[6]||(n[6]=s=>m(o).amount=s),"append-inner-icon":"M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9Z"},null,8,["modelValue"])])]),_:1})]),_:1}),a(Y,{justify:"end"},{default:v(()=>[a(U,{cols:"auto"},{default:v(()=>[a(z,{onClick:n[7]||(n[7]=s=>te())},{default:v(()=>[_("Delete")]),_:1})]),_:1}),a(U,{cols:"auto"},{default:v(()=>[a(z,{onClick:n[8]||(n[8]=s=>g.$router.back())},{default:v(()=>[_("Cancel")]),_:1})]),_:1}),a(U,{cols:"auto"},{default:v(()=>[a(z,{onClick:n[9]||(n[9]=s=>ae())},{default:v(()=>[_("Save")]),_:1})]),_:1})]),_:1}),a(wl,{modelValue:m(p),"onUpdate:modelValue":n[12]||(n[12]=s=>ge(p)?p.value=s:null),"max-width":"290"},{default:v(()=>[a(dl,null,{default:v(()=>[a(vl,null,{default:v(()=>[_("Are you sure you want to delete this item?")]),_:1}),a(ml,null,{default:v(()=>[a(z,{onClick:n[10]||(n[10]=s=>p.value=!1)},{default:v(()=>[_("Cancel")]),_:1}),a(z,{onClick:n[11]||(n[11]=s=>ne())},{default:v(()=>[_("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Bl as _};
