import{d as b,bE as S,ay as T,v as f,a8 as V,af as n,r as $,bN as k,c as x,B as l,A as e,ak as A,aj as m,C as i,aA as D,ab as I,aa as U,aB as B,q as g,am as N,ao as F,_ as j}from"./DUZ6GGUJ.js";import{V as E}from"./DNLzWWhd.js";import{V as v}from"./DzcASrW7.js";import{V as C,a as s}from"./CcX30Z8E.js";import{V as P}from"./TLrWqy3n.js";import{V as q}from"./DF0Cv7p-.js";import"./BAbBF5AD.js";import"./B2sktEBk.js";import"./ee6zQKgg.js";const O=b({__name:"route-selector",props:{label:{}},setup(c){const d=S(),{entities:a}=T(d);return d.fetch(),(r,p)=>(f(),V(E,{label:r.label,items:n(a),"item-title":"name","item-value":"id",clearable:""},null,8,["label","items"]))}}),z=b({__name:"form",props:{trip:{type:Object,default:()=>({name:"",start:"",end:"",planningRoute:null,recordedRoute:null})}},setup(c){const a=$({...c.trip}),r=k(),p=x(()=>new Date(a.value.start)<new Date),y=async()=>{try{if(a.value.id)await r.update(a.value);else{const u={...a.value};await r.create(u)}g("/trips")}catch(u){console.error("An error occurred while saving the item:",u)}};async function w(){dialog.value=!0}async function _(){await r.delete(a.value.id),g("/items")}return(u,t)=>{const R=O;return f(),V(P,null,{default:l(()=>[e(v,{modelValue:n(a).name,"onUpdate:modelValue":t[0]||(t[0]=o=>n(a).name=o),label:"Name"},null,8,["modelValue"]),e(C,null,{default:l(()=>[e(s,{cols:"6"},{default:l(()=>[e(v,{modelValue:n(a).start,"onUpdate:modelValue":t[1]||(t[1]=o=>n(a).start=o),label:"Start",type:"datetime-local"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:l(()=>[e(v,{modelValue:n(a).end,"onUpdate:modelValue":t[2]||(t[2]=o=>n(a).end=o),label:"End",type:"datetime-local"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(s,null,{default:l(()=>[e(R,{label:"Planned route",modelValue:n(a).planningRoute,"onUpdate:modelValue":t[3]||(t[3]=o=>n(a).planningRoute=o)},null,8,["modelValue"])]),_:1}),n(p)?(f(),V(s,{key:0},{default:l(()=>[e(R,{label:"Recorded route",modelValue:n(a).recordedRoute,"onUpdate:modelValue":t[4]||(t[4]=o=>n(a).recordedRoute=o)},null,8,["modelValue"])]),_:1})):A("",!0)]),_:1}),e(C,{justify:"end"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(m,{onClick:t[5]||(t[5]=o=>w())},{default:l(()=>[i("Delete")]),_:1})]),_:1}),e(s,{cols:"auto"},{default:l(()=>[e(m,{onClick:t[6]||(t[6]=o=>u.$router.back())},{default:l(()=>[i("Cancel")]),_:1})]),_:1}),e(s,{cols:"auto"},{default:l(()=>[e(m,{onClick:t[7]||(t[7]=o=>y())},{default:l(()=>[i("Save")]),_:1})]),_:1})]),_:1}),e(D,{modelValue:u.dialog,"onUpdate:modelValue":t[10]||(t[10]=o=>u.dialog=o),"max-width":"290"},{default:l(()=>[e(I,null,{default:l(()=>[e(U,null,{default:l(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(B,null,{default:l(()=>[e(m,{onClick:t[8]||(t[8]=o=>u.dialog=!1)},{default:l(()=>[i("Cancel")]),_:1}),e(m,{onClick:t[9]||(t[9]=o=>_())},{default:l(()=>[i("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),G=b({__name:"[id]",async setup(c){let d,a;const r=k();[d,a]=N(()=>r.fetch()),await d,a();const p=r.byId(F().params.id);return(y,w)=>{const _=z;return f(),V(q,null,{default:l(()=>[e(_,{trip:n(p)},null,8,["trip"])]),_:1})}}}),Z=j(G,[["__scopeId","data-v-83349e6f"]]);export{Z as default};
