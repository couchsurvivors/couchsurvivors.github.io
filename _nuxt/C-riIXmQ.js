import{d as b,bE as S,ay as T,v as V,a8 as c,af as n,r as $,bN as k,c as D,B as a,y as x,z as A,A as l,ak as B,aj as p,C as m,aA as I,ab as N,aa as U,aB as F,q as w,am as j,ao as E,_ as P}from"./BaXN0e-j.js";import{V as q}from"./B_Z6ohki.js";import{V as y}from"./C36rDAUo.js";import{V as C,a as s}from"./OyCoQ4aT.js";import{V as z}from"./CHFATBHF.js";import{V as O}from"./DQuxaZtO.js";import"./BrOTASPc.js";import"./DI2KTq-C.js";import"./CYGR5LlK.js";const G=b({__name:"route-selector",props:{label:{}},setup(_){const d=S(),{entities:e}=T(d);return d.fetch(),(r,f)=>(V(),c(q,{label:r.label,items:n(e),"item-title":"name","item-value":"id",clearable:""},null,8,["label","items"]))}}),H=b({__name:"form",props:{trip:{type:Object,default:()=>({name:"",start:"",end:"",planningRoute:null,recordedRoute:null})}},setup(_){const e=$({..._.trip}),r=k(),f=D(()=>new Date(e.value.start)<new Date),R=async()=>{var u,t;e.value.planningRoute=(u=e.value.planningRoute)==null?void 0:u.id,e.value.recordedRoute=(t=e.value.recordedRoute)==null?void 0:t.id;try{if(e.value.id)await r.update(e.value);else{const i={...e.value};await r.create(i)}w("/trips")}catch(i){console.error("An error occurred while saving the item:",i)}};async function g(){dialog.value=!0}async function v(){await r.delete(e.value.id),w("/items")}return(u,t)=>{const i=G;return V(),c(z,null,{default:a(()=>[x("pre",null,""+A(n(e))+`
        `,1),l(y,{modelValue:n(e).name,"onUpdate:modelValue":t[0]||(t[0]=o=>n(e).name=o),label:"Name"},null,8,["modelValue"]),l(C,null,{default:a(()=>[l(s,{cols:"6"},{default:a(()=>[l(y,{modelValue:n(e).start,"onUpdate:modelValue":t[1]||(t[1]=o=>n(e).start=o),label:"Start",type:"datetime-local"},null,8,["modelValue"])]),_:1}),l(s,{cols:"6"},{default:a(()=>[l(y,{modelValue:n(e).end,"onUpdate:modelValue":t[2]||(t[2]=o=>n(e).end=o),label:"End",type:"datetime-local"},null,8,["modelValue"])]),_:1})]),_:1}),l(C,null,{default:a(()=>[l(s,null,{default:a(()=>[l(i,{label:"Planned route",modelValue:n(e).planningRoute,"onUpdate:modelValue":t[3]||(t[3]=o=>n(e).planningRoute=o)},null,8,["modelValue"])]),_:1}),n(f)?(V(),c(s,{key:0},{default:a(()=>[l(i,{label:"Recorded route",modelValue:n(e).recordedRoute,"onUpdate:modelValue":t[4]||(t[4]=o=>n(e).recordedRoute=o)},null,8,["modelValue"])]),_:1})):B("",!0)]),_:1}),l(C,{justify:"end"},{default:a(()=>[l(s,{cols:"auto"},{default:a(()=>[l(p,{onClick:t[5]||(t[5]=o=>g())},{default:a(()=>[m("Delete")]),_:1})]),_:1}),l(s,{cols:"auto"},{default:a(()=>[l(p,{onClick:t[6]||(t[6]=o=>u.$router.back())},{default:a(()=>[m("Cancel")]),_:1})]),_:1}),l(s,{cols:"auto"},{default:a(()=>[l(p,{onClick:t[7]||(t[7]=o=>R())},{default:a(()=>[m("Save")]),_:1})]),_:1})]),_:1}),l(I,{modelValue:u.dialog,"onUpdate:modelValue":t[10]||(t[10]=o=>u.dialog=o),"max-width":"290"},{default:a(()=>[l(N,null,{default:a(()=>[l(U,null,{default:a(()=>[m("Are you sure you want to delete this item?")]),_:1}),l(F,null,{default:a(()=>[l(p,{onClick:t[8]||(t[8]=o=>u.dialog=!1)},{default:a(()=>[m("Cancel")]),_:1}),l(p,{onClick:t[9]||(t[9]=o=>v())},{default:a(()=>[m("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),J=b({__name:"[id]",async setup(_){let d,e;const r=k();[d,e]=j(()=>r.fetch()),await d,e();const f=r.byId(E().params.id);return(R,g)=>{const v=H;return V(),c(O,null,{default:a(()=>[l(v,{trip:n(f)},null,8,["trip"])]),_:1})}}}),ee=P(J,[["__scopeId","data-v-83349e6f"]]);export{ee as default};
