import{d as C,bE as S,ay as T,v as f,a8 as V,af as n,r as $,bN as k,c as D,B as a,y as x,z as A,A as e,ak as B,aj as m,C as i,aA as I,ab as N,aa as U,aB as F,q as R,am as j,ao as E,_ as P}from"./CPb7ijZ0.js";import{V as q}from"./DYOGe3q0.js";import{V as v}from"./CIjJM81q.js";import{V as y,a as s}from"./y8GzQG_S.js";import{V as z}from"./BAL6uCyO.js";import{V as O}from"./B6x5pPJ_.js";import"./CtIDnSUU.js";import"./BEaguvZ6.js";import"./CGuM9Ssf.js";const G=C({__name:"route-selector",props:{label:{}},setup(c){const d=S(),{entities:l}=T(d);return d.fetch(),(r,p)=>(f(),V(q,{label:r.label,items:n(l),"item-title":"name","item-value":"id",clearable:""},null,8,["label","items"]))}}),H=C({__name:"form",props:{trip:{type:Object,default:()=>({name:"",start:"",end:"",planningRoute:null,recordedRoute:null})}},setup(c){const l=$({...c.trip}),r=k(),p=D(()=>new Date(l.value.start)<new Date),b=async()=>{try{if(l.value.id)await r.update(l.value);else{const u={...l.value};await r.create(u)}R("/trips")}catch(u){console.error("An error occurred while saving the item:",u)}};async function w(){dialog.value=!0}async function _(){await r.delete(l.value.id),R("/items")}return(u,t)=>{const g=G;return f(),V(z,null,{default:a(()=>[x("pre",null,"        "+A(n(l))+`
    `,1),e(v,{modelValue:n(l).name,"onUpdate:modelValue":t[0]||(t[0]=o=>n(l).name=o),label:"Name"},null,8,["modelValue"]),e(y,null,{default:a(()=>[e(s,{cols:"6"},{default:a(()=>[e(v,{modelValue:n(l).start,"onUpdate:modelValue":t[1]||(t[1]=o=>n(l).start=o),label:"Start",type:"datetime-local"},null,8,["modelValue"])]),_:1}),e(s,{cols:"6"},{default:a(()=>[e(v,{modelValue:n(l).end,"onUpdate:modelValue":t[2]||(t[2]=o=>n(l).end=o),label:"End",type:"datetime-local"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(s,null,{default:a(()=>[e(g,{label:"Planned route",modelValue:n(l).planningRoute,"onUpdate:modelValue":t[3]||(t[3]=o=>n(l).planningRoute=o)},null,8,["modelValue"])]),_:1}),n(p)?(f(),V(s,{key:0},{default:a(()=>[e(g,{label:"Recorded route",modelValue:n(l).recordedRoute,"onUpdate:modelValue":t[4]||(t[4]=o=>n(l).recordedRoute=o)},null,8,["modelValue"])]),_:1})):B("",!0)]),_:1}),e(y,{justify:"end"},{default:a(()=>[e(s,{cols:"auto"},{default:a(()=>[e(m,{onClick:t[5]||(t[5]=o=>w())},{default:a(()=>[i("Delete")]),_:1})]),_:1}),e(s,{cols:"auto"},{default:a(()=>[e(m,{onClick:t[6]||(t[6]=o=>u.$router.back())},{default:a(()=>[i("Cancel")]),_:1})]),_:1}),e(s,{cols:"auto"},{default:a(()=>[e(m,{onClick:t[7]||(t[7]=o=>b())},{default:a(()=>[i("Save")]),_:1})]),_:1})]),_:1}),e(I,{modelValue:u.dialog,"onUpdate:modelValue":t[10]||(t[10]=o=>u.dialog=o),"max-width":"290"},{default:a(()=>[e(N,null,{default:a(()=>[e(U,null,{default:a(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(F,null,{default:a(()=>[e(m,{onClick:t[8]||(t[8]=o=>u.dialog=!1)},{default:a(()=>[i("Cancel")]),_:1}),e(m,{onClick:t[9]||(t[9]=o=>_())},{default:a(()=>[i("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),J=C({__name:"[id]",async setup(c){let d,l;const r=k();[d,l]=j(()=>r.fetch()),await d,l();const p=r.byId(E().params.id);return(b,w)=>{const _=H;return f(),V(O,null,{default:a(()=>[e(_,{trip:n(p)},null,8,["trip"])]),_:1})}}}),ee=P(J,[["__scopeId","data-v-83349e6f"]]);export{ee as default};
