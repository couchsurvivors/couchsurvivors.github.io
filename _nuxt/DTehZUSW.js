import{ad as j,E as b,B as R,ae as A,af as z,ag as I,H as F,I as B,ah as M,aa as U,ai as q,v as S,aj as N,M as T,ak as g,al as K,am as Z,an as G,ao as J,r as Q,ap as $,aq as W,C as X,ar as Y,as as ee,f as te,s as ae,A as se,o as ne,g as oe,w as _,b as m,i as re,d as ie,t as ce,at as le,au as H,z as x}from"./Ca2Kc0hX.js";import{V as ue}from"./DJgISf7Z.js";import{a as fe,V as de}from"./Db_-eyib.js";import{V as pe}from"./FxvDNyms.js";import{V as he}from"./B5UTIot2.js";import"./C1ZSqCTu.js";import"./CfZQAW1N.js";function me(){return globalThis.$fetch}const ye=t=>t==="defer"||t===!1;function ve(...t){var V;const n=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(n);let[s,o,a={}]=t;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=U(),l=o,d=()=>null,c=()=>e.isHydrating?e.payload.data[s]:e.static.data[s];a.server=a.server??!0,a.default=a.default??d,a.getCachedData=a.getCachedData??c,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??j.deep,a.dedupe=a.dedupe??"cancel";const f=()=>a.getCachedData(s,e)!=null;if(!e._asyncData[s]||!a.immediate){(V=e.payload._errors)[s]??(V[s]=null);const u=a.deep?b:R;e._asyncData[s]={data:u(a.getCachedData(s,e)??a.default()),pending:b(!f()),error:A(e.payload._errors,s),status:b("idle")}}const r={...e._asyncData[s]};r.refresh=r.execute=(u={})=>{if(e._asyncDataPromises[s]){if(ye(u.dedupe??a.dedupe))return e._asyncDataPromises[s];e._asyncDataPromises[s].cancelled=!0}if((u._initial||e.isHydrating&&u._initial!==!1)&&f())return Promise.resolve(a.getCachedData(s,e));r.pending.value=!0,r.status.value="pending";const h=new Promise((p,i)=>{try{p(l(e))}catch(w){i(w)}}).then(async p=>{if(h.cancelled)return e._asyncDataPromises[s];let i=p;a.transform&&(i=await a.transform(p)),a.pick&&(i=De(i,a.pick)),e.payload.data[s]=i,r.data.value=i,r.error.value=null,r.status.value="success"}).catch(p=>{if(h.cancelled)return e._asyncDataPromises[s];r.error.value=q(p),r.data.value=S(a.default()),r.status.value="error"}).finally(()=>{h.cancelled||(r.pending.value=!1,delete e._asyncDataPromises[s])});return e._asyncDataPromises[s]=h,e._asyncDataPromises[s]},r.clear=()=>_e(e,s);const D=()=>r.refresh({_initial:!0}),C=a.server!==!1&&e.payload.serverRendered;{const u=z();if(u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const i=u._nuxtOnBeforeMountCbs;I(()=>{i.forEach(w=>{w()}),i.splice(0,i.length)}),F(()=>i.splice(0,i.length))}C&&e.isHydrating&&(r.error.value||f())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):u&&(e.payload.serverRendered&&e.isHydrating||a.lazy)&&a.immediate?u._nuxtOnBeforeMountCbs.push(D):a.immediate&&D();const h=N();if(a.watch){const i=B(a.watch,()=>r.refresh());h&&M(i)}const p=e.hook("app:data:refresh",async i=>{(!i||i.includes(s))&&await r.refresh()});h&&M(p)}const y=Promise.resolve(e._asyncDataPromises[s]).then(()=>r);return Object.assign(y,r),y}function _e(t,n){n in t.payload.data&&(t.payload.data[n]=void 0),n in t.payload._errors&&(t.payload._errors[n]=null),t._asyncData[n]&&(t._asyncData[n].data.value=void 0,t._asyncData[n].error.value=null,t._asyncData[n].pending.value=!1,t._asyncData[n].status.value="idle"),n in t._asyncDataPromises&&(t._asyncDataPromises[n].cancelled=!0,t._asyncDataPromises[n]=void 0)}function De(t,n){const s={};for(const o of n)s[o]=t[o];return s}function ge(t,n,s){const[o={},a]=[{},n],e=T(()=>g(t)),l=o.key||K([a,typeof e.value=="string"?e.value:"",...Ce(o)]);if(!l||typeof l!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+l);const d=l===a?"$f"+l:l;if(!o.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:c,lazy:f,default:r,transform:D,pick:C,watch:y,immediate:V,getCachedData:u,deep:h,dedupe:p,...i}=o,w=Z({...G,...i,cache:typeof o.cache=="boolean"?void 0:o.cache}),k={server:c,lazy:f,default:r,transform:D,pick:C,immediate:V,getCachedData:u,deep:h,dedupe:p,watch:y===!1?[]:[w,e,...y||[]]};let v;return ve(d,()=>{var L;(L=v==null?void 0:v.abort)==null||L.call(v),v=typeof AbortController<"u"?new AbortController:{};const E=g(o.timeout);return E&&setTimeout(()=>v.abort(),E),(o.$fetch||globalThis.$fetch)(e.value,{signal:v.signal,...w})},k)}function Ce(t){var s;const n=[((s=g(t.method))==null?void 0:s.toUpperCase())||"GET",g(t.baseURL)];for(const o of[t.params||t.query]){const a=g(o);if(!a)continue;const e={};for(const[l,d]of Object.entries(a))e[g(l)]=g(d);n.push(e)}return n}const O=()=>J("nuxt-session",()=>({}));function we(){const t=O();return{loggedIn:T(()=>!!t.value.user),user:T(()=>t.value.user||null),session:t,fetch:Ve,clear:be}}async function Ve(){O().value=await me()("/api/_auth/session",{headers:{Accept:"text/json"},retry:!1}).catch(()=>({}))}async function be(){await $fetch("/api/_auth/session",{method:"DELETE"}),O().value={}}function He(t,n){const s=typeof t=="string"?Q(t):t,o=xe(s,n);return{mounted:o,updated:o,unmounted(a){$(null,a)}}}function xe(t,n){return function(s,o,a){var D,C,y;const e=typeof n=="function"?n(o):n,l=((D=o.value)==null?void 0:D.text)??o.value,d=W(o.value)?o.value:{},c=()=>l??s.innerHTML,f=(a.ctx===o.instance.$?(C=Pe(a,o.instance.$))==null?void 0:C.provides:(y=a.ctx)==null?void 0:y.provides)??o.instance.$.provides,r=X(t,Y(e,d),c);r.appContext=Object.assign(Object.create(null),o.instance.$.appContext,{provides:f}),$(r,s)}}function Pe(t,n){const s=new Set,o=e=>{var l,d;for(const c of e){if(!c)continue;if(c===t)return!0;s.add(c);let f;if(c.suspense?f=o([c.ssContent]):Array.isArray(c.children)?f=o(c.children):(l=c.component)!=null&&l.vnode&&(f=o([(d=c.component)==null?void 0:d.subTree])),f)return f;s.delete(c)}return!1};if(!o([n.subTree]))throw new Error("Could not find original vnode");const a=Array.from(s).reverse();for(const e of a)if(e.component)return e.component;return n}const P=He(ee,t=>{var n;return{activator:"parent",location:((n=t.arg)==null?void 0:n.replace("-"," "))??"top",text:typeof t.value=="boolean"?void 0:t.value}}),je=te({__name:"auth",async setup(t){let n,s;const o=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Title",key:"title"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Actions",key:"actions"}],{data:a}=([n,s]=ae(()=>ge("/api/people","$2lITnJ9n35")),n=await n,s(),n),{loggedIn:e}=we();return B(e,()=>{e.value||se("/")}),(l,d)=>(ne(),oe(ue,{fluid:""},{default:_(()=>[m(de,null,{default:_(()=>[m(fe,null,{default:_(()=>[m(re,null,{default:_(()=>[m(pe,{items:S(a)||void 0,headers:o,"show-select":""},{"item.role":_(({item:c})=>[m(he,null,{default:_(()=>[ie(ce(c.role),1)]),_:2},1024)]),"item.actions":_(()=>[m(le,{defaults:{VBtn:{size:20,rounded:"lg",variant:"text",class:"ml-1",color:""},VIcon:{size:20},VTooltip:{location:"top"}}},{default:_(()=>[H(m(x,{icon:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},null,512),[[P,{text:"Edit"}]]),H(m(x,{icon:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,512),[[P,{text:"Copy"}]]),H(m(x,{icon:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"},null,512),[[P,{text:"Delete"}]])]),_:1})]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{je as default};
