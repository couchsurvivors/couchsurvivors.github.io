import{_ as B}from"./Ba0zRgLF.js";import{u as N,g as D}from"./se0ErPme.js";import{d as T,r as m,b3 as R,c as W,Y as j,o as q,v as f,F as V,B as t,A as a,b9 as z,b6 as C,ba as h,y as k,S as s,C as n,H as G,G as H,b7 as M,bb as O,q as y}from"./D-_Di33_.js";import{V as w}from"./BnuzNU5C.js";import{V as Y}from"./9l-mOhRP.js";import{V as c,a as i}from"./BNwdXSMp.js";import{V as E}from"./F--aJuPD.js";import{V as J}from"./NPU1zdhK.js";const le=T({__name:"form",props:{item:{type:Object,default:()=>({name:"",weight:1,amount:1,image:null})}},emits:["close-dialog"],setup(x){const U=m(""),d=m(!1),b=x,e=m({...b.item}),r=R(),p=m("mdi-weight-gram"),g=m(1),_=W(()=>e.value.weight>=1e3?(e.value.weight/1e3).toFixed(2):e.value.weight.toFixed(2)),v=u=>{switch(p.value=u>=1e3?"mdi-weight-kilogram":"mdi-weight-gram",p.value){case"mdi-weight-kilogram":g.value=.1;break;case"mdi-weight-gram":g.value=1;break}},F=async()=>{try{if(e.value.id)await r.update(e.value);else{if(e.value.image){const l=await N("images",O(),e.value.image);e.value.image=l.path}const u={...e.value};await r.create(u)}y("/items")}catch(u){console.error("An error occurred while saving the item:",u)}};async function I(){d.value=!0}async function $(){await r.delete(e.value.id),y("/items")}async function S(){U.value=await D("images",e.value.image)}return j(()=>e.value.weight,v),q(()=>{b.item.image&&S(),v(e.value.weight)}),(u,l)=>{const A=B;return f(),V(J,null,{default:t(()=>[a(z,{"aspect-ratio":"16 / 9","max-height":"150"},{default:t(()=>[e.value.image?(f(),V(A,{key:0,"image-path":e.value.image},null,8,["image-path"])):C("",!0)]),_:1}),a(w,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),label:"Name"},null,8,["modelValue"]),e.value.id?C("",!0):(f(),V(Y,{key:0,modelValue:e.value.image,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.image=o),label:"Image",accept:"image/*","show-size":"","prepend-icon":"mdi-image",clearable:""},null,8,["modelValue"])),a(c,null,{default:t(()=>[a(i,{cols:"10"},{default:t(()=>[a(h,{modelValue:e.value.weight,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.weight=o),label:"Weight",min:1,max:1e4,step:g.value,onChange:v},null,8,["modelValue","step"])]),_:1}),a(i,{cols:"2"},{default:t(()=>[k("span",null,[a(w,{value:_.value,"append-inner-icon":p.value,readonly:""},null,8,["value","append-inner-icon"])])]),_:1})]),_:1}),a(c,null,{default:t(()=>[a(i,{cols:"10"},{default:t(()=>[a(h,{modelValue:e.value.amount,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.amount=o),label:"Amount",min:"1",max:"50",step:"1"},null,8,["modelValue"])]),_:1}),a(i,{cols:"2"},{default:t(()=>[k("span",null,[a(w,{modelValue:e.value.amount,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.amount=o),"append-inner-icon":"mdi-alpha-x"},null,8,["modelValue"])])]),_:1})]),_:1}),a(c,{justify:"end"},{default:t(()=>[a(i,{cols:"auto"},{default:t(()=>[a(s,{onClick:l[5]||(l[5]=o=>I())},{default:t(()=>[n("Delete")]),_:1})]),_:1}),a(i,{cols:"auto"},{default:t(()=>[a(s,{onClick:l[6]||(l[6]=o=>u.$router.back())},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),a(i,{cols:"auto"},{default:t(()=>[a(s,{onClick:l[7]||(l[7]=o=>F())},{default:t(()=>[n("Save")]),_:1})]),_:1})]),_:1}),a(E,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=o=>d.value=o),"max-width":"290"},{default:t(()=>[a(G,null,{default:t(()=>[a(H,null,{default:t(()=>[n("Are you sure you want to delete this item?")]),_:1}),a(M,null,{default:t(()=>[a(s,{onClick:l[8]||(l[8]=o=>d.value=!1)},{default:t(()=>[n("Cancel")]),_:1}),a(s,{onClick:l[9]||(l[9]=o=>$())},{default:t(()=>[n("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{le as _};
