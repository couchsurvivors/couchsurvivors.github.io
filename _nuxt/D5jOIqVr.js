import{d as b,bu as R,ay as k,v as f,a8 as V,af as n,r as S,c as x,B as l,y as $,z as D,A as a,ak as I,aj as i,C as d,aA as T,ab as A,aa as B,aB as U,q as w,bF as F,am as N,ao as j,_ as P}from"./qPFunt97.js";import{V as q}from"./CY49URQ6.js";import{V as _}from"./D6eRkJFt.js";import{V as g,a as m}from"./DpXd5I7R.js";import{V as z}from"./CbZqTQhT.js";import{V as E}from"./nZgcIMQj.js";import"./BxbLmWml.js";import"./D1gMZuV6.js";import"./CMwBS_O1.js";import"./DjVn3XnK.js";const O=b({__name:"route-selector",props:{label:{}},setup(c){const s=R(),{entities:t}=k(s);return s.fetch(),(u,p)=>(f(),V(q,{label:u.label,items:n(t),"item-title":"name","item-value":"id","auto-select-first":"exact",clearable:""},null,8,["label","items"]))}}),G=b({__name:"form",props:{trip:{type:Object,default:()=>({name:"",start:"",end:"",planningRoute:null,recordedRoute:null})}},setup(c){const t=S({...c.trip}),u=x(()=>new Date(t.value.start)<new Date),p=async()=>{try{if(t.value.id)await itemsStore.update(t.value);else{const r={...t.value};await itemsStore.create(r)}w("/items")}catch(r){console.error("An error occurred while saving the item:",r)}};async function v(){dialog.value=!0}async function C(){await itemsStore.delete(t.value.id),w("/items")}return(r,e)=>{const y=O;return f(),V(z,null,{default:l(()=>[$("pre",null,""+D(n(t))+`
        `,1),a(_,{modelValue:n(t).name,"onUpdate:modelValue":e[0]||(e[0]=o=>n(t).name=o),label:"Name"},null,8,["modelValue"]),a(g,null,{default:l(()=>[a(m,{cols:"6"},{default:l(()=>[a(_,{modelValue:n(t).start,"onUpdate:modelValue":e[1]||(e[1]=o=>n(t).start=o),label:"Start",type:"datetime-local"},null,8,["modelValue"])]),_:1}),a(m,{cols:"6"},{default:l(()=>[a(_,{modelValue:n(t).end,"onUpdate:modelValue":e[2]||(e[2]=o=>n(t).end=o),label:"End",type:"datetime-local"},null,8,["modelValue"])]),_:1})]),_:1}),a(y,{label:"Planned route",modelValue:n(t).planningRoute,"onUpdate:modelValue":e[3]||(e[3]=o=>n(t).planningRoute=o)},null,8,["modelValue"]),n(u)?(f(),V(y,{key:0,label:"Recorded route",modelValue:n(t).recordedRoute,"onUpdate:modelValue":e[4]||(e[4]=o=>n(t).recordedRoute=o)},null,8,["modelValue"])):I("",!0),a(g,{justify:"end"},{default:l(()=>[a(m,{cols:"auto"},{default:l(()=>[a(i,{onClick:e[5]||(e[5]=o=>v())},{default:l(()=>[d("Delete")]),_:1})]),_:1}),a(m,{cols:"auto"},{default:l(()=>[a(i,{onClick:e[6]||(e[6]=o=>r.$router.back())},{default:l(()=>[d("Cancel")]),_:1})]),_:1}),a(m,{cols:"auto"},{default:l(()=>[a(i,{onClick:e[7]||(e[7]=o=>p())},{default:l(()=>[d("Save")]),_:1})]),_:1})]),_:1}),a(T,{modelValue:r.dialog,"onUpdate:modelValue":e[10]||(e[10]=o=>r.dialog=o),"max-width":"290"},{default:l(()=>[a(A,null,{default:l(()=>[a(B,null,{default:l(()=>[d("Are you sure you want to delete this item?")]),_:1}),a(U,null,{default:l(()=>[a(i,{onClick:e[8]||(e[8]=o=>r.dialog=!1)},{default:l(()=>[d("Cancel")]),_:1}),a(i,{onClick:e[9]||(e[9]=o=>C())},{default:l(()=>[d("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),H=b({__name:"[id]",async setup(c){let s,t;const u=F();[s,t]=N(()=>u.fetch()),await s,t();const p=u.byId(j().params.id);return(v,C)=>{const r=G;return f(),V(E,null,{default:l(()=>[a(r,{trip:n(p)},null,8,["trip"])]),_:1})}}}),ee=P(H,[["__scopeId","data-v-83349e6f"]]);export{ee as default};
