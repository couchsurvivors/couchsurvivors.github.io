import{_ as F}from"./DWLKdKjh.js";import{u as Z,g as $}from"./B7tXqPNI.js";import{f as S,E as s,O as N,M as T,I as B,G as D,o as p,g as v,w as t,b as a,T as R,R as c,U as w,a as M,z as m,d as i,i as W,h as j,S as z,W as O,A as L}from"./FFCUu7_l.js";import{V as f}from"./D5gt7puh.js";import{V as E}from"./ZXpSVsak.js";import{V as A,a as n}from"./B0czaI6F.js";import{V as G}from"./CKm5LBmg.js";import{V as q}from"./9LmUxs9L.js";const l1=S({__name:"form",props:{item:{type:Object,default:()=>({name:"",weight:1,amount:1,image:null})}},emits:["close-dialog"],setup(y){const k=s(""),d=s(!1),g=y,e=s({...g.item}),V=N(),r=s("M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z"),C=s(1),U=T(()=>e.value.weight>=1e3?(e.value.weight/1e3).toFixed(2):e.value.weight.toFixed(2)),H=u=>{switch(r.value=u>=1e3?"M12,3A4,4 0 0,1 16,7C16,7.73 15.81,8.41 15.46,9H18C18.95,9 19.75,9.67 19.95,10.56C21.96,18.57 22,18.78 22,19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19C2,18.78 2.04,18.57 4.05,10.56C4.25,9.67 5.05,9 6,9H8.54C8.19,8.41 8,7.73 8,7A4,4 0 0,1 12,3M12,5A2,2 0 0,0 10,7A2,2 0 0,0 12,9A2,2 0 0,0 14,7A2,2 0 0,0 12,5M6,11V19H8V16.5L9,17.5V19H11V17L9,15L11,13V11H9V12.5L8,13.5V11H6M15,11C13.89,11 13,11.89 13,13V17C13,18.11 13.89,19 15,19H18V14H16V17H15V13H18V11H15Z":"M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z",r.value){case"M12,3A4,4 0 0,1 16,7C16,7.73 15.81,8.41 15.46,9H18C18.95,9 19.75,9.67 19.95,10.56C21.96,18.57 22,18.78 22,19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19C2,18.78 2.04,18.57 4.05,10.56C4.25,9.67 5.05,9 6,9H8.54C8.19,8.41 8,7.73 8,7A4,4 0 0,1 12,3M12,5A2,2 0 0,0 10,7A2,2 0 0,0 12,9A2,2 0 0,0 14,7A2,2 0 0,0 12,5M6,11V19H8V16.5L9,17.5V19H11V17L9,15L11,13V11H9V12.5L8,13.5V11H6M15,11C13.89,11 13,11.89 13,13V17C13,18.11 13.89,19 15,19H18V14H16V17H15V13H18V11H15Z":C.value=.1;break;case"M19.95,10.56C19.75,9.67 18.95,9 18,9H15.46C15.81,8.41 16,7.73 16,7A4,4 0 0,0 12,3A4,4 0 0,0 8,7C8,7.73 8.19,8.41 8.54,9H6C5.05,9 4.25,9.67 4.05,10.56C2.04,18.57 2,18.78 2,19A2,2 0 0,0 4,21H20A2,2 0 0,0 22,19C22,18.78 21.96,18.57 19.95,10.56M12,5A2,2 0 0,1 14,7A2,2 0 0,1 12,9A2,2 0 0,1 10,7A2,2 0 0,1 12,5M15,13H11V17H13V14H15V19H11C9.89,19 9,18.11 9,17V13C9,11.89 9.89,11 11,11H15V13Z":C.value=1;break}},b=async()=>{try{if(e.value.id)await V.update(e.value);else{if(e.value.image){const l=await Z("images",O(),e.value.image);e.value.image=l.path}const u={...e.value};await V.create(u)}L("/items")}catch(u){console.error("An error occurred while saving the item:",u)}};async function x(){d.value=!0}async function _(){await V.delete(e.value.id),L("/items")}async function h(){k.value=await $("images",e.value.image)}return B(()=>e.value.weight,H),D(()=>{g.item.image&&h(),H(e.value.weight)}),(u,l)=>{const I=F;return p(),v(q,null,{default:t(()=>[a(R,{"aspect-ratio":"16 / 9","max-height":"150"},{default:t(()=>[e.value.image?(p(),v(I,{key:0,"image-path":e.value.image},null,8,["image-path"])):c("",!0)]),_:1}),a(f,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),label:"Name"},null,8,["modelValue"]),e.value.id?c("",!0):(p(),v(E,{key:0,modelValue:e.value.image,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.image=o),label:"Image",accept:"image/*","show-size":"","prepend-icon":"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",clearable:""},null,8,["modelValue"])),a(A,null,{default:t(()=>[a(n,{cols:"10"},{default:t(()=>[a(w,{modelValue:e.value.weight,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.weight=o),label:"Weight",min:1,max:1e4,step:C.value,onChange:H},null,8,["modelValue","step"])]),_:1}),a(n,{cols:"2"},{default:t(()=>[M("span",null,[a(f,{value:U.value,"append-inner-icon":r.value,readonly:""},null,8,["value","append-inner-icon"])])]),_:1})]),_:1}),a(A,null,{default:t(()=>[a(n,{cols:"10"},{default:t(()=>[a(w,{modelValue:e.value.amount,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.amount=o),label:"Amount",min:"1",max:"50",step:"1"},null,8,["modelValue"])]),_:1}),a(n,{cols:"2"},{default:t(()=>[M("span",null,[a(f,{modelValue:e.value.amount,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.amount=o),"append-inner-icon":"M9,7L11,12L9,17H11L12,14.5L13,17H15L13,12L15,7H13L12,9.5L11,7H9Z"},null,8,["modelValue"])])]),_:1})]),_:1}),a(A,{justify:"end"},{default:t(()=>[a(n,{cols:"auto"},{default:t(()=>[a(m,{onClick:l[5]||(l[5]=o=>x())},{default:t(()=>[i("Delete")]),_:1})]),_:1}),a(n,{cols:"auto"},{default:t(()=>[a(m,{onClick:l[6]||(l[6]=o=>u.$router.back())},{default:t(()=>[i("Cancel")]),_:1})]),_:1}),a(n,{cols:"auto"},{default:t(()=>[a(m,{onClick:l[7]||(l[7]=o=>b())},{default:t(()=>[i("Save")]),_:1})]),_:1})]),_:1}),a(G,{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=o=>d.value=o),"max-width":"290"},{default:t(()=>[a(W,null,{default:t(()=>[a(j,null,{default:t(()=>[i("Are you sure you want to delete this item?")]),_:1}),a(z,null,{default:t(()=>[a(m,{onClick:l[8]||(l[8]=o=>d.value=!1)},{default:t(()=>[i("Cancel")]),_:1}),a(m,{onClick:l[9]||(l[9]=o=>_())},{default:t(()=>[i("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{l1 as _};
